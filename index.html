<html lang=en>
 <head>
  <meta charset=UTF-8><meta name=viewport
      content="width=device-width, initial-scale=1">
  <title>reblocks-parenscript - An utility to define JavaScript dependencies for 
   Weblocks widgets using Parenscript.</title>
  <link rel=alternate
        href="https://40ants.com/reblocks-parenscript/changelog.xml"
        type="application/rss+xml">
  <link rel=stylesheet type="text/css"
        href=theme.css>
  <script type="text/javascript" src=jquery.js></script>
  <script type="text/javascript" src=toc.js></script>
  <script type="text/javascript">$(document).ready(function() {$('a:has(img)').css('border-bottom', 'none')})</script>
  <link rel=stylesheet type="text/css"
      href=highlight.min.css>
  <script type="text/javascript"
          src=highlight.min.js></script>
  <script type="text/javascript">hljs.highlightAll();</script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FL71WXK73K"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-FL71WXK73K');
    </script>

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
       (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
       m[i].l=1*new Date();
       for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
       k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
       (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

       ym(42462884, "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true
       });
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/42462884" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->

 </head>
 <body>
  <div class=page><a id=fork-me href="https://github.com/40ants/reblocks-parenscript">Fork me on 
    GitHub</a>
   <div class=navbar>
    <div class=navbar-inner>
     <a class=brand href="/">
      <img class=logo
           src="https://40ants.com/img/logo.svg"></a>
     <ul class=nav>
      <li><a href="/posts/">Blog</a>
      <li><a href="/ru/posts/">Blog (RU)</a>
      <li><a href="/tips/">Lisp Tips</a>
      <li><a href="/projects/">Our Projects</a>
      <li><a href="/about/">About</a>
     </ul>
    </div>
   </div>
   <input type=checkbox id=sidebar-check>
   <label for=sidebar-check>
    <div id=sidebar-trigger>
     <span></span><span></span><span></span>
    </div></label><div class=sidebar><div class=header><form class=search method=GET action="search/">
      <input type=text name=q>
      <input type=submit value=Search><span id=search-progress></span>
     </form>
    </div><div class=content><div class=page-toc><ul><li><p><a href="#x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-40INDEX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-40INDEX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">reblocks-parenscript - An utility to define JavaScript dependencies for Weblocks widgets using Parenscript.</a></p><ul><li><p><a href="#reblocks-parenscript-asdf-system-details" data-document="" data-node="reblocks-parenscript-asdf-system-details">REBLOCKS-PARENSCRIPT ASDF System Details</a></p></li><li><p><a href="#x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-40INSTALLATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-40INSTALLATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Installation</a></p></li><li><p><a href="#x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-40USAGE-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-40USAGE-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Usage</a></p></li><li><p><a href="#x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-40API-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-40API-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">API</a></p><ul><li><p><a href="#x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-40REBLOCKS-PARENSCRIPT-3FPACKAGE-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-40REBLOCKS-PARENSCRIPT-3FPACKAGE-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">REBLOCKS-PARENSCRIPT</a></p><ul><li><p><a href="#x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-7C-40REBLOCKS-PARENSCRIPT-3FClasses-SECTION-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-7C-40REBLOCKS-PARENSCRIPT-3FClasses-SECTION-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Classes</a></p><ul><li><p><a href="#x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-40REBLOCKS-PARENSCRIPT-24PARENSCRIPT-DEPENDENCY-3FCLASS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-40REBLOCKS-PARENSCRIPT-24PARENSCRIPT-DEPENDENCY-3FCLASS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">PARENSCRIPT-DEPENDENCY</a></p></li></ul></li><li><p><a href="#x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-7C-40REBLOCKS-PARENSCRIPT-3FFunctions-SECTION-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-7C-40REBLOCKS-PARENSCRIPT-3FFunctions-SECTION-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Functions</a></p></li><li><p><a href="#x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-7C-40REBLOCKS-PARENSCRIPT-3FMacros-SECTION-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-7C-40REBLOCKS-PARENSCRIPT-3FMacros-SECTION-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Macros</a></p></li></ul></li></ul></li></ul></li><li><p><a href="changelog/#x-28REBLOCKS-PARENSCRIPT-DOCS-2FCHANGELOG-3A-40CHANGELOG-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="changelog/" data-node="x-28REBLOCKS-PARENSCRIPT-DOCS-2FCHANGELOG-3A-40CHANGELOG-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">ChangeLog</a></p></li></ul>
     </div>
    </div><div class=footer>
     <a href="https://40ants.com/doc">[generated by 40ANTS-DOC]</a>
    </div>
   </div><div class=content role=main><h1>reblocks-parenscript - An utility to define JavaScript dependencies for Weblocks widgets using Parenscript.<a class=header-link
     href=#x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-40INDEX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-40INDEX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h1><h2 id="reblocks-parenscript-asdf-system-details">REBLOCKS-PARENSCRIPT ASDF System Details</h2><ul><li><p>Description: An utility to define JavaScript dependencies for Weblocks widgets using Parenscript.</p></li><li><p>Licence: Unlicense</p></li><li><p>Author: Alexander Artemenko &lt;svetlyak.40wt@gmail.com&gt;</p></li><li><p>Homepage: <a href="https://40ants.com/reblocks-parenscript/">https://40ants.com/reblocks-parenscript/</a></p></li><li><p>Bug tracker: <a href="https://github.com/40ants/reblocks-parenscript/issues">https://github.com/40ants/reblocks-parenscript/issues</a></p></li><li><p>Source control: <a href="https://github.com/40ants/reblocks-parenscript">GIT</a></p></li><li><p>Depends on: <a href="https://quickdocs.org/alexandria">alexandria</a>, <a href="https://quickdocs.org/bordeaux-threads">bordeaux-threads</a>, <a href="https://quickdocs.org/parenscript">parenscript</a>, <a href="https://quickdocs.org/reblocks">reblocks</a></p></li></ul><p><a href="https://github.com/40ants/reblocks-parenscript/actions"><img src="https://github-actions.40ants.com/40ants/reblocks-parenscript/matrix.svg?only=ci.run-tests"/></a></p><p><img src="http://quickdocs.org/badge/reblocks-parenscript.svg"/></p><h2>Installation<a class=header-link
     href=#x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-40INSTALLATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-40INSTALLATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><p>You can install this library from Quicklisp, but you want to receive updates quickly, then install it from Ultralisp.org:</p><pre><code class="">(ql-dist:install-dist &quot;http://dist.ultralisp.org/&quot;
                      :prompt nil)
(ql:quickload :reblocks-parenscript)</code></pre><h2>Usage<a class=header-link
     href=#x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-40USAGE-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-40USAGE-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><p>This library should be used to define JavaScript dependencies for Reblocks widgets.</p><h2>API<a class=header-link
     href=#x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-40API-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-40API-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><h3>REBLOCKS-PARENSCRIPT<a class=header-link
     href=#x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-40REBLOCKS-PARENSCRIPT-3FPACKAGE-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-40REBLOCKS-PARENSCRIPT-3FPACKAGE-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h3><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/reblocks-parenscript/blob/5ab0995017ffe0c87b77005f50779a3437c74fb3/src/reblocks-parenscript.lisp#L1">package</a><div class=reference-object><div class=object-name><a href=#x-28-23A-28-2820-29-20BASE-CHAR-20-2E-20-22REBLOCKS-PARENSCRIPT-22-29-20PACKAGE-29 id=x-28-23A-28-2820-29-20BASE-CHAR-20-2E-20-22REBLOCKS-PARENSCRIPT-22-29-20PACKAGE-29>reblocks-parenscript</a></div></div><a class=bullet-link href=#x-28-23A-28-2820-29-20BASE-CHAR-20-2E-20-22REBLOCKS-PARENSCRIPT-22-29-20PACKAGE-29></a></div></div><h4>Classes<a class=header-link
     href=#x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-7C-40REBLOCKS-PARENSCRIPT-3FClasses-SECTION-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-7C-40REBLOCKS-PARENSCRIPT-3FClasses-SECTION-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h4><h5>PARENSCRIPT-DEPENDENCY<a class=header-link
     href=#x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-40REBLOCKS-PARENSCRIPT-24PARENSCRIPT-DEPENDENCY-3FCLASS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-40REBLOCKS-PARENSCRIPT-24PARENSCRIPT-DEPENDENCY-3FCLASS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h5><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/reblocks-parenscript/blob/5ab0995017ffe0c87b77005f50779a3437c74fb3/src/reblocks-parenscript.lisp#L40">class</a><div class=reference-object><div class=object-name><a href=#x-28REBLOCKS-PARENSCRIPT-3APARENSCRIPT-DEPENDENCY-20CLASS-29 id=x-28REBLOCKS-PARENSCRIPT-3APARENSCRIPT-DEPENDENCY-20CLASS-29>reblocks-parenscript:parenscript-dependency</a></div><div class=object-args><span class=locative-args></span></div></div><a class=bullet-link href=#x-28REBLOCKS-PARENSCRIPT-3APARENSCRIPT-DEPENDENCY-20CLASS-29></a></div><div class=bullet-content><p>Keeps JavaScript code, created using <a href="https://40ants.com/reblocks-parenscript/#x-28REBLOCKS-PARENSCRIPT-3AMAKE-DEPENDENCY-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/reblocks-parenscript/" data-node="x-28REBLOCKS-PARENSCRIPT-3AMAKE-DEPENDENCY-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>make-dependency</code></a> macro or <a href="https://40ants.com/reblocks-parenscript/#x-28REBLOCKS-PARENSCRIPT-3AMAKE-DEPENDENCY-2A-20FUNCTION-29" data-document="https://40ants.com/reblocks-parenscript/" data-node="x-28REBLOCKS-PARENSCRIPT-3AMAKE-DEPENDENCY-2A-20FUNCTION-29"><code>make-dependency*</code></a> function.</p></div></div><p><b>Readers</b></p><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/reblocks-parenscript/blob/5ab0995017ffe0c87b77005f50779a3437c74fb3/src/reblocks-parenscript.lisp#L41">reader</a><div class=reference-object><div class=object-name><a href=#x-28REBLOCKS-PARENSCRIPT-3AJS-CODE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-20REBLOCKS-PARENSCRIPT-3APARENSCRIPT-DEPENDENCY-29-29 id=x-28REBLOCKS-PARENSCRIPT-3AJS-CODE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-20REBLOCKS-PARENSCRIPT-3APARENSCRIPT-DEPENDENCY-29-29>reblocks-parenscript:js-code</a></div><div class=object-args><span class=locative-args></span><span class=locative-args>(:js)</span></div></div><a class=bullet-link href=#x-28REBLOCKS-PARENSCRIPT-3AJS-CODE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-20REBLOCKS-PARENSCRIPT-3APARENSCRIPT-DEPENDENCY-29-29></a></div></div><h4>Functions<a class=header-link
     href=#x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-7C-40REBLOCKS-PARENSCRIPT-3FFunctions-SECTION-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-7C-40REBLOCKS-PARENSCRIPT-3FFunctions-SECTION-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h4><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/reblocks-parenscript/blob/5ab0995017ffe0c87b77005f50779a3437c74fb3/src/reblocks-parenscript.lisp#L111">function</a><div class=reference-object><div class=object-name><a href=#x-28REBLOCKS-PARENSCRIPT-3AMAKE-DEPENDENCY-2A-20FUNCTION-29 id=x-28REBLOCKS-PARENSCRIPT-3AMAKE-DEPENDENCY-2A-20FUNCTION-29>reblocks-parenscript:make-dependency*</a></div><div class=object-args><span class=locative-args>parenscript-code</span></div></div><a class=bullet-link href=#x-28REBLOCKS-PARENSCRIPT-3AMAKE-DEPENDENCY-2A-20FUNCTION-29></a></div><div class=bullet-content><p>This function works similarly like <a href="https://40ants.com/reblocks-parenscript/#x-28REBLOCKS-PARENSCRIPT-3AMAKE-DEPENDENCY-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/reblocks-parenscript/" data-node="x-28REBLOCKS-PARENSCRIPT-3AMAKE-DEPENDENCY-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>make-dependency</code></a> macro but accepts
Parenscript code as a list. They are related to each other like
parenscript:ps macro and parenscript:ps* function.</p><p>Use a function version when you want to build a JavaScript code from
parts and embed some value into it.</p><p>Usually it looks like this:</p><pre><code class="lisp">CL-USER&gt; (let ((widget-id &quot;foo-bar&quot;))
           (reblocks-parenscript:make-dependency*
            `(defun show-alert ()
               (alert (+ &quot;Hello from widget with id = &quot; ,widget-id)))))
#&lt;REBLOCKS-PARENSCRIPT:PARENSCRIPT-DEPENDENCY &gt;</code></pre><p>This will generate following JavaScript code:</p><pre><code class="">CL-USER&gt; (format t &quot;~A~%&quot;
                 (reblocks-parenscript:js-code *))
function showAlert() {
    __PS_MV_REG = [];
    return alert('Hello from widget with id = ' + 'foo-bar');
};</code></pre></div></div><h4>Macros<a class=header-link
     href=#x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-7C-40REBLOCKS-PARENSCRIPT-3FMacros-SECTION-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28REBLOCKS-PARENSCRIPT-DOCS-2FINDEX-3A-3A-7C-40REBLOCKS-PARENSCRIPT-3FMacros-SECTION-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h4><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/reblocks-parenscript/blob/5ab0995017ffe0c87b77005f50779a3437c74fb3/src/reblocks-parenscript.lisp#L61">macro</a><div class=reference-object><div class=object-name><a href=#x-28REBLOCKS-PARENSCRIPT-3AMAKE-DEPENDENCY-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29 id=x-28REBLOCKS-PARENSCRIPT-3AMAKE-DEPENDENCY-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29>reblocks-parenscript:make-dependency</a></div><div class=object-args><span class=locative-args>&amp;body parenscript-code</span></div></div><a class=bullet-link href=#x-28REBLOCKS-PARENSCRIPT-3AMAKE-DEPENDENCY-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29></a></div><div class=bullet-content><p>This macro creates an object of class <a href="https://40ants.com/reblocks-parenscript/#x-28REBLOCKS-PARENSCRIPT-3APARENSCRIPT-DEPENDENCY-20CLASS-29" data-document="https://40ants.com/reblocks-parenscript/" data-node="x-28REBLOCKS-PARENSCRIPT-3APARENSCRIPT-DEPENDENCY-20CLASS-29"><code>parenscript-dependency</code></a> transformin the <code>BODY</code>
into JavaScript Code. It interpreters whole body as a Parenscript code.</p><p>Here is a usage example.</p><pre><code class="lisp">CL-USER&gt; (reblocks-parenscript:make-dependency
           (defun show-alert ()
             (ps:chain console (log &quot;Showing alert&quot;))
             (alert &quot;Hello from Lisp!&quot;))

           (set-interval show-alert 3000))
#&lt;REBLOCKS-PARENSCRIPT:PARENSCRIPT-DEPENDENCY &gt;</code></pre><p>This dependency will have this JavaScript code:</p><pre><code class="lisp">CL-USER&gt; (format t &quot;~A~%&quot;
                 (reblocks-parenscript:js-code *))
function showAlert() {
    console.log('Showing alert');
    __PS_MV_REG = [];
    return alert('Hello from Lisp!');
};
setInterval(showAlert, 3000);</code></pre><p>You can use this dependency in a method of <a href="https://40ants.com/reblocks/dependencies/#x-28REBLOCKS-2FDEPENDENCIES-3AGET-DEPENDENCIES-20GENERIC-FUNCTION-29"><code>reblocks/dependencies:get-dependencies</code></a> generic-function like this:</p><pre><code class="lisp">(defmethod reblocks/dependencies:get-dependencies ((widget example))
  (list*
   (reblocks-parenscript:make-dependency
     (defun show-alert ()
       (ps:chain console (log &quot;Showing alert&quot;))
       (alert &quot;Hello from Lisp!&quot;))

     (set-interval show-alert 3000))
   (call-next-method)))</code></pre></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/reblocks-parenscript/blob/5ab0995017ffe0c87b77005f50779a3437c74fb3/src/reblocks-parenscript.lisp#L181">macro</a><div class=reference-object><div class=object-name><a href=#x-28REBLOCKS-PARENSCRIPT-3AMAKE-JS-HANDLER-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29 id=x-28REBLOCKS-PARENSCRIPT-3AMAKE-JS-HANDLER-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29>reblocks-parenscript:make-js-handler</a></div><div class=object-args><span class=locative-args>&amp;key lisp-code js-code</span></div></div><a class=bullet-link href=#x-28REBLOCKS-PARENSCRIPT-3AMAKE-JS-HANDLER-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29></a></div><div class=bullet-content><p>Creates a Reblocks action and returns JavaScript code, which can be used as <code>onChange</code>, <code>onClick</code>, etc. handler.</p><ul><li><p>Argument <code>LISP-CODE</code> should be a list of conses:</p><p>First list item should be action's lambda list.
Other list items are wrapped into implicit progn.</p></li><li><p>Argument <code>JS-CODE</code> also should be a list of conses:</p><p>Parenscript code, returning an object.
This object will be passed to the Lisp part of the handler
as keyword arguments.</p></li></ul><p>This macro creates a code which will return a string.
The result is suitable to be used inline as value for <code>HTML</code> attributes like <code>onChange</code>, <code>onClick</code>, etc.</p><p>Handler must be build from two parts <code>JS</code> and Lisp.</p><p>JavaScript part should be written in Parenscript and return
an objects. This object will be passed to the backend as
keyword arguments for the action, defined by Lisp part of the handler.</p><p>The code from <code>JS-CODE</code> argument will be wrapped into a function which is called
immediately with implicit arguments.</p><p>Here is a real world example. This code processes updates of a text
in the <code>HTML</code> input. This way you can make a suggest or on fly value validation:</p><pre><code class="">(:input :value url
        :name &quot;url&quot;
        :type &quot;text&quot;
        :onchange
        (reblocks-parenscript:make-js-handler
         :lisp-code ((&amp;key url)
                     (update-url (branches widget)
                                 url))
         :js-code ((event)
                   ;; This will pass new URL value
                   ;; to the backend:
                   (parenscript:create
                    :url (@ event target value)))))</code></pre></div></div>
   </div><div class=footer>
    <hr class=separator>
    <p class=fineprint>Created with passion by <em>40Ants</em><a class=lisp-logo
     href="http://lisp-lang.org/">
      <img
           src="https://40ants.com/img/made-with-lisp.svg"></a>
   </div>
  </div>
 </body>
</html>